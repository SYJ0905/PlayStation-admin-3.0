{"version":3,"sources":["webpack:///./src/views/Coupon.vue?327c","webpack:///src/views/Coupon.vue","webpack:///./src/views/Coupon.vue?45e0","webpack:///./src/views/Coupon.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","click","$event","preventDefault","openCouponModal","_m","_l","item","index","key","_s","title","percent","due_date","opendelModal","attrs","id","tabindex","role","aria-labelledby","aria-hidden","for","directives","name","rawName","value","tempCoupon","expression","type","placeholder","domProps","input","target","composing","$set","true-value","false-value","checked","Array","isArray","is_enabled","_i","_q","change","$$a","$$el","$$c","$$v","$$i","concat","slice","data-dismiss","updateCoupon","delCoupon","staticRenderFns","aria-label","Couponvue_type_script_lang_js_","data","code","isNew","methods","Object","objectSpread","vuex_esm","vm","assign_default","jquery_default","modal","api","httpmethod","$http","then","response","success","$store","dispatch","computed","created","views_Couponvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d225da8.53a734ab.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"d-flex mt-4\"},[_c('h3',{staticClass:\"m-0\"},[_vm._v(\"優惠券列表\")]),_c('button',{staticClass:\"btn btn-outline-primary ml-auto\",on:{\"click\":function($event){$event.preventDefault();return _vm.openCouponModal(true)}}},[_vm._v(\"建立優惠券\")])]),_c('table',{staticClass:\"table mt-4\"},[_vm._m(0),_c('tbody',_vm._l((_vm.coupons),function(item,index){return _c('tr',{key:index},[_c('td',{staticClass:\"align-middle\"},[_vm._v(_vm._s(item.title))]),_c('td',{staticClass:\"align-middle\"},[_vm._v(_vm._s(item.percent)+\" %\")]),_c('td',{staticClass:\"align-middle\"},[_vm._v(_vm._s(item.due_date))]),_c('td',{staticClass:\"align-middle\"},[(item.is_enabled)?_c('span',{staticClass:\"text-success font-weight-bold\"},[_vm._v(\"已啟用\")]):_c('span',{staticClass:\"text-dark font-weight-bold\"},[_vm._v(\"尚未啟用\")])]),_c('td',[_c('button',{staticClass:\"btn btn-outline-primary btn-sm\",on:{\"click\":function($event){$event.preventDefault();return _vm.openCouponModal(false, item)}}},[_vm._v(\"編輯\")]),_c('button',{staticClass:\"btn btn-outline-danger btn-sm\",on:{\"click\":function($event){$event.preventDefault();return _vm.opendelModal(item)}}},[_vm._v(\"刪除\")])])])}),0)]),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"couponModal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_vm._m(1),_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"title\"}},[_vm._v(\"優惠名稱\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.title),expression:\"tempCoupon.title\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"title\",\"placeholder\":\"請輸入優惠名稱\"},domProps:{\"value\":(_vm.tempCoupon.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempCoupon, \"title\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"coupon_code\"}},[_vm._v(\"優惠碼\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.code),expression:\"tempCoupon.code\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"coupon_code\",\"placeholder\":\"請輸入優惠碼\"},domProps:{\"value\":(_vm.tempCoupon.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempCoupon, \"code\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"due_date\"}},[_vm._v(\"到期日\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.due_date),expression:\"tempCoupon.due_date\"}],staticClass:\"form-control\",attrs:{\"type\":\"date\",\"id\":\"due_date\"},domProps:{\"value\":(_vm.tempCoupon.due_date)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempCoupon, \"due_date\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"price\"}},[_vm._v(\"折扣百分比\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.percent),expression:\"tempCoupon.percent\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"id\":\"price\",\"placeholder\":\"請輸入折扣百分比\"},domProps:{\"value\":(_vm.tempCoupon.percent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempCoupon, \"percent\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"form-check\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.is_enabled),expression:\"tempCoupon.is_enabled\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"checkbox\",\"true-value\":1,\"false-value\":0,\"id\":\"is_enabled\"},domProps:{\"checked\":Array.isArray(_vm.tempCoupon.is_enabled)?_vm._i(_vm.tempCoupon.is_enabled,null)>-1:_vm._q(_vm.tempCoupon.is_enabled,1)},on:{\"change\":function($event){var $$a=_vm.tempCoupon.is_enabled,$$el=$event.target,$$c=$$el.checked?(1):(0);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.tempCoupon, \"is_enabled\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.tempCoupon, \"is_enabled\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.tempCoupon, \"is_enabled\", $$c)}}}}),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"is_enabled\"}},[_vm._v(\"\\n                是否啟用\\n              \")])])])]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"Close\")]),_c('button',{staticClass:\"btn btn-outline-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.updateCoupon($event)}}},[_vm._v(\"更新優惠券\")])])])])]),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"delCouponModal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content border-0\"},[_vm._m(2),_c('div',{staticClass:\"modal-body\"},[_vm._v(\"\\n          是否刪除 \"),_c('strong',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm.tempCoupon.title))]),_vm._v(\" 商品(刪除後將無法恢復)。\\n        \")]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"取消\")]),_c('button',{staticClass:\"btn btn-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.delCoupon(_vm.tempCoupon.id)}}},[_vm._v(\"確認刪除\")])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"優惠名稱\")]),_c('th',[_vm._v(\"折扣百分比\")]),_c('th',[_vm._v(\"到期日\")]),_c('th',[_vm._v(\"是否啟用\")]),_c('th',[_vm._v(\"編輯\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header bg-dark text-white\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"exampleModalLabel\"}},[_vm._v(\"優惠券設定\")]),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header bg-danger text-white\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"exampleModalLabel\"}},[_c('span',[_vm._v(\"刪除優惠券\")])]),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!--loading :active.sync=\"isLoading\"></loading-->\r\n    <div class=\"d-flex mt-4\">\r\n      <h3 class=\"m-0\">優惠券列表</h3>\r\n      <button class=\"btn btn-outline-primary ml-auto\" @click.prevent=\"openCouponModal(true)\">建立優惠券</button>\r\n    </div>\r\n    <table class=\"table mt-4\">\r\n      <thead>\r\n        <tr>\r\n          <th>優惠名稱</th>\r\n          <th>折扣百分比</th>\r\n          <th>到期日</th>\r\n          <th>是否啟用</th>\r\n          <th>編輯</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"(item, index) in coupons\" :key=\"index\">\r\n          <td class=\"align-middle\">{{ item.title }}</td>\r\n          <td class=\"align-middle\">{{ item.percent }} %</td>\r\n          <td class=\"align-middle\">{{ item.due_date }}</td>\r\n          <td class=\"align-middle\">\r\n            <span class=\"text-success font-weight-bold\" v-if=\"item.is_enabled\">已啟用</span>\r\n            <span class=\"text-dark font-weight-bold\" v-else>尚未啟用</span>\r\n          </td>\r\n          <td>\r\n            <button class=\"btn btn-outline-primary btn-sm\" @click.prevent=\"openCouponModal(false, item)\">編輯</button>\r\n            <button class=\"btn btn-outline-danger btn-sm\" @click.prevent=\"opendelModal(item)\">刪除</button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <!-- 優惠券 modal -->\r\n    <div class=\"modal fade\" id=\"couponModal\" tabindex=\"-1\" role=\"dialog\"\r\n      aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header bg-dark text-white\">\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">優惠券設定</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"form-group\">\r\n              <label for=\"title\">優惠名稱</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"title\"\r\n                v-model=\"tempCoupon.title\"\r\n                placeholder=\"請輸入優惠名稱\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"coupon_code\">優惠碼</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"coupon_code\"\r\n                v-model=\"tempCoupon.code\"\r\n                placeholder=\"請輸入優惠碼\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"due_date\">到期日</label>\r\n              <input type=\"date\" class=\"form-control\" \r\n                v-model=\"tempCoupon.due_date\"\r\n              id=\"due_date\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"price\">折扣百分比</label>\r\n              <input type=\"number\" class=\"form-control\" id=\"price\"\r\n                v-model=\"tempCoupon.percent\"\r\n                placeholder=\"請輸入折扣百分比\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <div class=\"form-check\">\r\n                <input class=\"form-check-input\" type=\"checkbox\"\r\n                  v-model=\"tempCoupon.is_enabled\"\r\n                  :true-value=\"1\"\r\n                  :false-value=\"0\"\r\n                  id=\"is_enabled\">\r\n                <label class=\"form-check-label\" for=\"is_enabled\">\r\n                  是否啟用\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n            <button type=\"button\" class=\"btn btn-outline-primary\" @click.prevent=\"updateCoupon\">更新優惠券</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 刪除商品  Modal -->\r\n    <div class=\"modal fade\" id=\"delCouponModal\" tabindex=\"-1\" role=\"dialog\"\r\n      aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content border-0\">\r\n          <div class=\"modal-header bg-danger text-white\">\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n              <span>刪除優惠券</span>\r\n            </h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            是否刪除 <strong class=\"text-danger\">{{ tempCoupon.title }}</strong> 商品(刪除後將無法恢復)。\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">取消</button>\r\n            <button type=\"button\" class=\"btn btn-danger\" @click.prevent=\"delCoupon(tempCoupon.id)\">確認刪除</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from 'jquery';\r\nimport {mapActions, mapGetters} from 'vuex';\r\nexport default {\r\n  data() {\r\n    return {\r\n      tempCoupon: {\r\n        title: '',\r\n        code: '',\r\n        due_date: 0,\r\n        percent: 100,\r\n        is_enabled: 0,\r\n      },\r\n      isNew: false,\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions('couponModules', ['getCoupons', 'delCoupon']),\r\n    openCouponModal(isNew, item) {\r\n      // 開啟 編輯 modal\r\n      const vm = this;\r\n      if (isNew) {\r\n        vm.tempCoupon = {};\r\n        vm.isNew = true;\r\n      } else {\r\n        vm.tempCoupon = Object.assign({}, item);\r\n        vm.isNew = false;\r\n      };\r\n      $('#couponModal').modal('show');\r\n    },\r\n    updateCoupon() {\r\n      // 建立 編輯 優惠券\r\n      const vm = this;\r\n      let api = `${process.env.VUE_APP_API_PATH}/api/${process.env.VUE_APP_CUSTOM_PATH}/admin/coupon`;\r\n      let httpmethod = 'post';\r\n      if (vm.isNew == false) {\r\n        api = `${process.env.VUE_APP_API_PATH}/api/${process.env.VUE_APP_CUSTOM_PATH}/admin/coupon/${vm.tempCoupon.id}`;\r\n        httpmethod = 'put';\r\n      };\r\n      this.$http[httpmethod](api, { data: vm.tempCoupon}).then((response) => {\r\n        if (response.data.success) {\r\n          $('#couponModal').modal('hide');\r\n          vm.$store.dispatch('couponModules/getCoupons');\r\n        };\r\n      });\r\n    },\r\n    opendelModal(item) {\r\n      //開啟 刪除優惠券  modal\r\n      const vm = this;\r\n      vm.tempCoupon = Object.assign({}, item);\r\n      $('#delCouponModal').modal('show');\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters('couponModules', ['coupons'])\r\n  },\r\n  created() {\r\n    // this.getCoupons();\r\n    this.$store.dispatch('couponModules/getCoupons');\r\n  },\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coupon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coupon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Coupon.vue?vue&type=template&id=5cf3208a&\"\nimport script from \"./Coupon.vue?vue&type=script&lang=js&\"\nexport * from \"./Coupon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}